# Arquivo específico para executar azuracast_install via Portainer
# Use este arquivo no Portainer para executar a instalação inicial
# Após a instalação, use docker-compose.yml + docker-compose.prod.yml normalmente

name: azuracast-install

services:
  install:
    container_name: azuracast-install
    image: "ghcr.io/azuracast/azuracast:${AZURACAST_VERSION:-latest}"
    command: azuracast_install
    env_file:
      - azuracast.env
      - .env
    volumes:
      - station_data:/var/azuracast/stations
      - backups:/var/azuracast/backups
      - db_data:/var/lib/mysql
      - www_uploads:/var/azuracast/storage/uploads
      - shoutcast2_install:/var/azuracast/storage/shoutcast2
      - stereo_tool_install:/var/azuracast/storage/stereo_tool
      - rsas_install:/var/azuracast/storage/rsas
      - geolite_install:/var/azuracast/storage/geoip
      - sftpgo_data:/var/azuracast/storage/sftpgo
      - acme:/var/azuracast/storage/acme
      # Customizações CSS/JS
      - ./custom:/var/azuracast/www/backend/public/custom:ro
    networks:
      - azuracast_internal
    restart: "no"  # Não reiniciar após conclusão

volumes:
  db_data: { }
  acme: { }
  shoutcast2_install: { }
  stereo_tool_install: { }
  rsas_install: { }
  geolite_install: { }
  sftpgo_data: { }
  station_data: { }
  www_uploads: { }
  backups: { }

networks:
  azuracast_internal:
    driver: bridge
