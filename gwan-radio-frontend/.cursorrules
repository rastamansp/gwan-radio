# ğŸš€ Cursor Rules - Gwan Radio Frontend

## ğŸ“‹ VisÃ£o Geral do Projeto

Este Ã© um projeto React + TypeScript + Vite que implementa o frontend da GWAN Reggae Radio - uma rÃ¡dio online brasileira dedicada ao reggae, dancehall, roots e dub. O projeto segue os princÃ­pios de Clean Architecture, SOLID e melhores prÃ¡ticas de desenvolvimento frontend.

## ğŸš« **REGRAS CRÃTICAS - NUNCA VIOLAR**

### âŒ **NUNCA desabilitar funcionalidades essenciais:**
- âŒ **NUNCA** usar `any` type
- âŒ **NUNCA** usar `console.log` (usar logger estruturado ou remover)
- âŒ **NUNCA** remover validaÃ§Ãµes de props
- âŒ **NUNCA** desabilitar tratamento de erros
- âŒ **NUNCA** remover interfaces ou tipos TypeScript
- âŒ **NUNCA** fazer operaÃ§Ãµes sÃ­ncronas bloqueantes
- âŒ **NUNCA** misturar lÃ³gica de negÃ³cio com componentes de UI
- âŒ **NUNCA** usar `alert()` - sempre usar sonner/toast

### âœ… **SEMPRE corrigir problemas de configuraÃ§Ã£o:**
- âœ… **SEMPRE** verificar variÃ¡veis de ambiente
- âœ… **SEMPRE** configurar APIs corretamente
- âœ… **SEMPRE** implementar fallbacks e retry logic
- âœ… **SEMPRE** usar logging estruturado para debug
- âœ… **SEMPRE** seguir princÃ­pios de resiliÃªncia
- âœ… **SEMPRE** usar sonner para notificaÃ§Ãµes

## ğŸ—ï¸ Arquitetura e PadrÃµes

### Clean Architecture (Adaptada para Frontend)
- **Entities**: Tipos e interfaces de domÃ­nio (src/domain/entities)
- **Use Cases**: Casos de uso da aplicaÃ§Ã£o (src/application/use-cases)
- **Interface Adapters**: Services, API clients, Context providers (src/infrastructure)
- **Frameworks & Drivers**: React, Vite, Tailwind, Axios (src/presentation)

### SOLID Principles (Adaptados para Frontend)
- **S**: Single Responsibility Principle (componentes com uma responsabilidade)
- **O**: Open/Closed Principle (extensÃ­vel via props, fechado para modificaÃ§Ã£o)
- **L**: Liskov Substitution Principle (componentes substituÃ­veis)
- **I**: Interface Segregation Principle (interfaces especÃ­ficas)
- **D**: Dependency Inversion Principle (depender de abstraÃ§Ãµes, nÃ£o implementaÃ§Ãµes)

### Design Patterns
- **Repository Pattern**: Para acesso a dados via services
- **Factory Pattern**: Para criaÃ§Ã£o de objetos complexos
- **Observer Pattern**: Para gerenciamento de estado (Context API)
- **Command Pattern**: Para aÃ§Ãµes do usuÃ¡rio
- **Provider Pattern**: Para injeÃ§Ã£o de dependÃªncias
- **Custom Hooks Pattern**: Para lÃ³gica de negÃ³cio reutilizÃ¡vel

## ğŸ“ Estrutura de Pastas (Clean Architecture)

```
src/
â”œâ”€â”€ domain/                      # Camada de DomÃ­nio
â”‚   â”œâ”€â”€ entities/               # Entidades de negÃ³cio
â”‚   â”œâ”€â”€ repositories/           # Interfaces dos repositÃ³rios
â”‚   â””â”€â”€ errors/                 # Erros de domÃ­nio
â”œâ”€â”€ application/                # Camada de AplicaÃ§Ã£o
â”‚   â”œâ”€â”€ use-cases/             # Casos de uso
â”‚   â”œâ”€â”€ dto/                   # Data Transfer Objects
â”‚   â””â”€â”€ validators/            # Validadores Zod
â”œâ”€â”€ infrastructure/             # Camada de Infraestrutura
â”‚   â”œâ”€â”€ repositories/          # ImplementaÃ§Ãµes dos repositÃ³rios
â”‚   â”œâ”€â”€ logging/               # Sistema de logging
â”‚   â””â”€â”€ http/                  # Cliente HTTP
â”œâ”€â”€ presentation/              # Camada de ApresentaÃ§Ã£o
â”‚   â”œâ”€â”€ hooks/                # Custom hooks
â”‚   â”œâ”€â”€ components/           # Componentes especÃ­ficos de pÃ¡ginas
â”‚   â”‚   â”œâ”€â”€ RadioPlayer.tsx   # Player de rÃ¡dio fixo
â”‚   â”‚   â””â”€â”€ NowPlayingWidget.tsx # Widget de mÃºsica atual
â”‚   â”œâ”€â”€ pages/                # PÃ¡ginas da aplicaÃ§Ã£o
â”‚   â”‚   â”œâ”€â”€ Home.tsx          # PÃ¡gina inicial
â”‚   â”‚   â”œâ”€â”€ Noticias.tsx      # Lista de notÃ­cias
â”‚   â”‚   â”œâ”€â”€ NoticiaDetalhe.tsx # Detalhe da notÃ­cia
â”‚   â”‚   â”œâ”€â”€ Agenda.tsx        # Agenda de eventos
â”‚   â”‚   â”œâ”€â”€ Artistas.tsx      # Lista de artistas
â”‚   â”‚   â”œâ”€â”€ ArtistaDetalhe.tsx # Detalhe do artista
â”‚   â”‚   â”œâ”€â”€ Sobre.tsx         # Sobre a rÃ¡dio
â”‚   â”‚   â””â”€â”€ TestChatbot.tsx   # PÃ¡gina de teste do chatbot
â”‚   â””â”€â”€ contexts/             # Contextos React
â”‚       â””â”€â”€ RadioContext.tsx  # Contexto do player de rÃ¡dio
â”œâ”€â”€ components/               # Componentes globais
â”‚   â”œâ”€â”€ Navbar.tsx           # NavegaÃ§Ã£o principal
â”‚   â”œâ”€â”€ Footer.tsx            # RodapÃ©
â”‚   â””â”€â”€ ui/                   # Componentes shadcn/ui
â”œâ”€â”€ contexts/                 # Contextos globais
â”‚   â””â”€â”€ AuthContext.tsx       # Contexto de autenticaÃ§Ã£o
â”œâ”€â”€ shared/                   # CÃ³digo compartilhado
â”‚   â”œâ”€â”€ data/                # Dados JSON (notÃ­cias, eventos, artistas)
â”‚   â”œâ”€â”€ constants/           # Constantes
â”‚   â”œâ”€â”€ di/                  # DI Container
â”‚   â””â”€â”€ utils/               # UtilitÃ¡rios
â”œâ”€â”€ App.tsx                  # Componente principal com Toaster
â”œâ”€â”€ main.tsx                 # Arquivo de entrada
â””â”€â”€ index.css                # Estilos globais (tema reggae)
```

## ğŸ¨ Design System - Tema Reggae

O projeto utiliza um tema dark com cores reggae:

- **Primary**: Verde reggae (`hsl(145 63% 42%)`)
- **Secondary**: Amarelo reggae (`hsl(51 100% 50%)`)
- **Accent**: Vermelho reggae (`hsl(348 83% 47%)`)

### Classes UtilitÃ¡rias Reggae

- `.text-gradient-reggae` - Texto com gradiente reggae (verde, amarelo, vermelho)
- `.bg-gradient-reggae` - Fundo com gradiente reggae
- `.glow-primary` - Efeito de brilho verde
- `.glow-accent` - Efeito de brilho vermelho
- `.pulse-live` - AnimaÃ§Ã£o de pulso para indicador "AO VIVO"
- `.card-hover` - Efeito hover em cards

## ğŸ”§ PadrÃµes de CÃ³digo

### Nomenclatura
- **Componentes**: PascalCase (ex: `RadioPlayer`, `NowPlayingWidget`)
- **Interfaces**: PascalCase com prefixo I (ex: `IRadioContext`) OU sem prefixo (ex: `RadioPlayerProps`)
- **FunÃ§Ãµes**: camelCase (ex: `handlePlay`, `fetchNowPlaying`)
- **VariÃ¡veis**: camelCase (ex: `isPlaying`, `nowPlaying`)
- **Constantes**: UPPER_SNAKE_CASE (ex: `STREAM_URL`, `POLLING_INTERVAL`)
- **Arquivos**: PascalCase para componentes, camelCase para outros (ex: `RadioPlayer.tsx`, `radioContext.ts`)

### Estrutura de Componentes
```typescript
import React from 'react'
import { toast } from 'sonner'
// Imports especÃ­ficos depois dos genÃ©ricos

interface RadioPlayerProps {
  className?: string
  onPlay?: () => void
}

export const RadioPlayer: React.FC<RadioPlayerProps> = ({ 
  className,
  onPlay
}) => {
  // Hooks primeiro
  const [isPlaying, setIsPlaying] = useState(false)
  
  // Handlers com useCallback
  const handlePlay = useCallback(() => {
    setIsPlaying(true)
    onPlay?.()
  }, [onPlay])
  
  // useEffects
  useEffect(() => {
    // efeitos
  }, [])
  
  // Render
  return (
    <div className={className} onClick={handlePlay}>
      {/* JSX */}
    </div>
  )
}
```

## ğŸµ Player de RÃ¡dio

O RadioPlayer Ã© um componente fixo no rodapÃ© que deve:
- Persistir entre rotas
- Manter estado de reproduÃ§Ã£o
- Buscar informaÃ§Ãµes "now playing" do AzuraCast
- Permitir controle de volume
- Exibir indicador "AO VIVO"

### RadioContext

O contexto gerencia:
- Estado de reproduÃ§Ã£o (`isPlaying`, `isLoading`)
- Volume (`volume`)
- InformaÃ§Ãµes da mÃºsica atual (`nowPlaying`)
- IntegraÃ§Ã£o com API do AzuraCast
- Polling automÃ¡tico para atualizar "now playing"

## ğŸ“ PadrÃµes de ValidaÃ§Ã£o

### ValidaÃ§Ã£o com Zod
```typescript
import { z } from 'zod'

export const NewsSchema = z.object({
  title: z.string().min(3, 'TÃ­tulo deve ter no mÃ­nimo 3 caracteres').max(200),
  content: z.string().min(10, 'ConteÃºdo deve ter no mÃ­nimo 10 caracteres'),
  date: z.string().regex(/^\d{4}-\d{2}-\d{2}$/, 'Data deve estar no formato YYYY-MM-DD'),
})

export type News = z.infer<typeof NewsSchema>
```

## ğŸš« O que NUNCA fazer

- âŒ **NUNCA** usar `any` type - sempre tipar corretamente
- âŒ **NUNCA** usar `console.log` - usar logger estruturado
- âŒ **NUNCA** usar `alert()` - usar sonner/toast
- âŒ **NUNCA** deixar props sem validaÃ§Ã£o
- âŒ **NUNCA** misturar lÃ³gica de negÃ³cio com UI
- âŒ **NUNCA** usar `var` (sempre `const` ou `let`)
- âŒ **NUNCA** fazer operaÃ§Ãµes sÃ­ncronas bloqueantes
- âŒ **NUNCA** esquecer de tratar erros
- âŒ **NUNCA** usar variÃ¡veis globais
- âŒ **NUNCA** criar componentes muito grandes (>400 linhas)
- âŒ **NUNCA** usar `useEffect` sem dependÃªncias corretas
- âŒ **NUNCA** remover validaÃ§Ãµes existentes
- âŒ **NUNCA** desabilitar tratamento de erros
- âŒ **NUNCA** remover o RadioPlayer do App.tsx

## âœ… O que SEMPRE fazer

- âœ… Usar TypeScript strict mode
- âœ… Definir interfaces para todas as props
- âœ… Usar hooks apropriadamente (useState, useEffect, useCallback, useMemo)
- âœ… Validar entrada de dados com Zod
- âœ… Tratar erros adequadamente com try/catch
- âœ… Usar sonner para notificaÃ§Ãµes
- âœ… Usar logs estruturados (container.logger)
- âœ… Seguir princÃ­pios SOLID
- âœ… Implementar Clean Architecture
- âœ… Usar React.memo quando apropriado
- âœ… Usar useCallback e useMemo quando necessÃ¡rio
- âœ… Separar lÃ³gica de negÃ³cio de UI
- âœ… Criar custom hooks para lÃ³gica reutilizÃ¡vel
- âœ… Organizar imports: React â†’ Third-party â†’ Internal
- âœ… Usar PascalCase para componentes e interfaces
- âœ… Manter RadioPlayer fixo no rodapÃ©
- âœ… Usar react-helmet-async para SEO em todas as pÃ¡ginas

## ğŸ“š Bibliotecas e Ferramentas

### Principais
- **React 18**: Biblioteca UI
- **TypeScript**: Tipagem estÃ¡tica
- **Vite**: Build tool
- **React Router DOM**: Roteamento
- **Tailwind CSS**: EstilizaÃ§Ã£o
- **shadcn/ui**: Componentes UI
- **React Query**: Gerenciamento de estado servidor
- **React Helmet Async**: SEO e meta tags
- **Zod**: ValidaÃ§Ã£o de esquemas
- **date-fns**: ManipulaÃ§Ã£o de datas
- **Lucide React**: Ãcones
- **React Hook Form**: FormulÃ¡rios
- **Sonner**: Sistema de notificaÃ§Ãµes

### Arquitetura
- Clean Architecture adaptada para frontend
- SOLID Principles
- Repository Pattern
- Dependency Injection
- Custom Hooks Pattern

---

**Lembre-se**: Este arquivo define os padrÃµes do projeto frontend da GWAN Radio. Sempre consulte antes de implementar novas funcionalidades para garantir consistÃªncia e qualidade do cÃ³digo. **NUNCA desabilite funcionalidades essenciais - sempre corrija os problemas de configuraÃ§Ã£o!**
